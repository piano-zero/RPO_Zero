name: Build Windows EXE

on: [push]

jobs:
  build:
    runs-on: windows-latest

    steps:
    - name: 1. Scarica il codice dal repository
      uses: actions/checkout@v4

    - name: 2. Configura Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'

    - name: 3. Installa le dipendenze
      run: |
        python -m pip install --upgrade pip
        # FORZIAMO l'installazione di fpdf2 e rimuoviamo eventuali tracce di fpdf vecchio
        pip install pyinstaller fpdf2
        # Se hai un file requirements.txt, decommenta la riga sotto:
        # pip install -r requirements.txt

    - name: 4. Creazione file EXE con PyInstaller
      run: |
        # Usiamo --collect-all fpdf per essere sicuri che fpdf2 venga impacchettato interamente
        # Ho rimosso il comando generico "MiaApplicazione" per evitare doppie build inutili
        pyinstaller --noconsole --onefile --collect-all fpdf --name "RPO_Zero_v2.0.0" rpo_zero_v2.0.0.py

    - name: 5. Caricamento del file creato (Artifact)
      uses: actions/upload-artifact@v4
      with:
        name: RPO-Zero-Windows-EXE
        path: dist/*.exe
