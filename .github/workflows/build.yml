name: Build Windows EXE

# Il processo parte ogni volta che fai un "push" (carichi file) sul repository
on: [push]

jobs:
  build:
    runs-on: windows-latest

    steps:
    - name: 1. Scarica il codice dal repository
      uses: actions/checkout@v4

    - name: 2. Configura Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.10' # Versione stabile e compatibile

    - name: 3. Installa le dipendenze
      run: |
        python -m pip install --upgrade pip
        # Installiamo PyInstaller e l'unica libreria esterna che usi (fpdf)
        pip install pyinstaller fpdf

    - name: 4. Creazione file EXE con PyInstaller
      run: |
        # --noconsole: nasconde il terminale nero (necessario per app grafiche Tkinter)
        # --onefile: impacchetta tutto in un unico file .exe
        # --name: definisce il nome dell'eseguibile finale
        # Sostituisci "main.py" con il nome reale del tuo script se Ã¨ diverso
        pyinstaller --noconsole --onefile --name "rpo_zero_v2.0.0" rpo_zero_v2.0.0.py

    - name: 5. Caricamento del file creato (Artifact)
      uses: actions/upload-artifact@v4
      with:
        name: Programma-Windows-EXE
        path: dist/*.exe
